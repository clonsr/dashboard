<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<title>玄関ダッシュボード</title>

<style>
body {
  margin: 0;
  background: #fff;
  color: #000;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.container {
  text-align: center;
}

h1 {
  font-size: 48px;
  margin-bottom: 20px;
}

#now {
  font-size: 28px;
  margin-bottom: 30px;
}

#next {
  font-size: 64px;
  font-weight: bold;
}

#next small {
  font-size: 28px;
  display: block;
  margin-top: 10px;
}

#after {
  font-size: 32px;
  margin-top: 20px;
  color: #555;
}
</style>
</head>

<body>
<div class="container">
  <h1>金町駅 行き</h1>
  <div id="now"></div>
  <div id="next"></div>
  <div id="after"></div>
</div>

<script>
// 金町駅 行き（全系統まとめ）
var timetable = [
  "05:29","05:54","06:19","06:49","07:04","07:14","07:29","07:44","07:59",
  "08:24","08:39","08:54",
  "09:24","09:39","09:54","10:09",
  "10:59","11:19","11:39","11:59",
  "12:44",
  "13:32","13:49",
  "14:34","14:59",
  "15:34","15:52",
  "16:09","16:49",
  "17:37","17:54",
  "18:09","18:24","18:38",
  "19:05","19:34",
  "20:04","20:19","20:59",
  "22:19"
];

function update() {
  var now = new Date();
  var nowMin = now.getHours() * 60 + now.getMinutes();

  document.getElementById("now").innerText =
    "現在時刻 " +
    ("0"+now.getHours()).slice(-2) + ":" +
    ("0"+now.getMinutes()).slice(-2);

  var next = null;
  var after = null;

  for (var i = 0; i < timetable.length; i++) {
    var t = timetable[i].split(":");
    var tMin = parseInt(t[0],10) * 60 + parseInt(t[1],10);
    if (tMin >= nowMin) {
      next = timetable[i];
      after = timetable[i + 1] || null;
      break;
    }
  }

  if (next) {
    var n = next.split(":");
    var diff = (parseInt(n[0],10)*60 + parseInt(n[1],10)) - nowMin;

    document.getElementById("next").innerHTML =
      "あと " + diff + " 分" +
      "<small>" + next + "</small>";

    document.getElementById("after").innerText =
      after ? "次：" + after : "";
  } else {
    document.getElementById("next").innerText = "本日の運行終了";
    document.getElementById("after").innerText = "";
  }
}

update();
setInterval(update, 60000);
</script>
</body>
</html>
