<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Dashboard">

  <title>Dashboard</title>
</head>
<body style="background:#111; color:#eee; text-align:center;">

  <div id="clock" style="font-size:64px; margin-top:80px;">--:--</div>
  <div id="date" style="font-size:20px; margin-top:10px;">----</div>
  <div id="bus" style="margin-top:40px;">
  <div style="font-size:22px;">次のバス</div>

  <div style="margin-top:10px; font-size:26px;">
    金町駅 行き
  </div>

  <div id="bus-next" style="font-size:48px; margin-top:10px;">
    -- 分
  </div>

  <div id="bus-time" style="font-size:20px;">
    --
  </div>

  <div style="margin-top:10px; font-size:16px; opacity:0.7;">
    次：<span id="bus-next2">--</span>
  </div>
</div>

  <div style="margin-top:40px; font-size:18px; opacity:0.7;">
    Have a nice day.
  </div>

  <script>
    function update() {
      var d = new Date();
      var h = d.getHours();
      var m = d.getMinutes();
      if (m < 10) m = "0" + m;

      var days = ["SUN","MON","TUE","WED","THU","FRI","SAT"];

      document.getElementById("clock").innerHTML = h + ":" + m;
      document.getElementById("date").innerHTML =
        days[d.getDay()] + "<br>" +
        d.getFullYear() + "." +
        (d.getMonth()+1) + "." +
        d.getDate();
    }

    update();
    setInterval(update, 60000);
  </script>
<script>
  var times = [
    "07:12",
    "07:25",
    "07:40",
    "08:05",
    "08:25",
    "08:45"
  ];

  function updateBus() {
    var now = new Date();
    var nowMin = now.getHours() * 60 + now.getMinutes();

    var next = null;
    var next2 = null;

    for (var i = 0; i < times.length; i++) {
      var t = times[i].split(":");
      var m = parseInt(t[0],10)*60 + parseInt(t[1],10);

      if (m >= nowMin) {
        if (next === null) {
          next = m;
        } else {
          next2 = m;
          break;
        }
      }
    }

    if (next === null) {
      document.getElementById("bus-next").innerHTML = "本日終了";
      document.getElementById("bus-time").innerHTML = "";
      document.getElementById("bus-next2").innerHTML = "";
      return;
    }

    var diff = next - nowMin;
    document.getElementById("bus-next").innerHTML = diff + " 分";
    document.getElementById("bus-time").innerHTML =
      Math.floor(next/60) + ":" + ("0"+(next%60)).slice(-2);

    if (next2 !== null) {
      document.getElementById("bus-next2").innerHTML =
        Math.floor(next2/60) + ":" + ("0"+(next2%60)).slice(-2);
    }
  }

  updateBus();
  setInterval(updateBus, 60000);
</script>

</body>


